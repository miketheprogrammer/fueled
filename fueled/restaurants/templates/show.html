{% extends "base.html" %}

{% block content %}
<style>
.item-box i{
 width:200px;
 height:200px;
}
.thumb-red
{
color:red;
}
.thumb-black {
color:black;
}
.author {
float:right;
left:90%;
}

.row-fluid [class*="span"].center, .center {
    margin: 0 auto;
    float: none;
}
</style>
<div class="hero-unit">
<center>
  <h1>{{restaurant.name}}</h1>
  <h3>{{restaurant.address}}</h3>
  <h3>{{restaurant.phone}}</h3>
  <h4>{{restaurant.cuisine_type}}</h4>

  <br/>
  <br/>
  <h5>You have visited this restaurant {{visit_counter.visit_count}} times.</h5>

  <div class="item-box">
    
    <i id="thumbs" class="icon-thumbs-down-alt icon-larger {% if thumbsdown %}thumb-red{% else %}thumb-black{% endif %}"></i>(click to change)
  </div>
</center>
</div>

       <center>     <legend>Comments</legend> </center>

      <div class="row">
        <div class="span6 center" style="">
          <div class="well">
            <p>This is a comment</p>
            <br/>
            <p class="author pull-right" style="">
              by: 
              <strong>
                <i>mhernandezasdasdasdasddas</i>
              </strong>
            </p>
          </div>
        </div>
      </div>
      <div class="row" id="comment-submit">
        <div class="span6 center" style="">
          <div class="well">
            <div class="signin-form">
              <textarea id="id_comment" name="comment" style="width:100%" rows="5"></textarea>
              <button id="submit" class="btn btn-large btn-primary pull-right">Submit</button>
              </div>
           </div>

        </div>
        </div>
      </div>

<script type="text/javascript">
thumbStates = {
    false:"thumb-black",
    true:"thumb-red",
}
thumbState = {% if thumbsdown %}true{% else %}false{% endif %};
console.log(thumbState);
$(document).ready(function() {
  $("#thumbs").on('click', function() {
    thumbState = !thumbState;
    $(this).removeClass(thumbStates[!thumbState]).addClass(thumbStates[thumbState]);
    $.getJSON("/social/thumbs/toggle/{{restaurant.pk}}/?v="+thumbState, function(response) {
      console.log(response);
    });
  });

  $("#submit").on('click', function() {
    var cmt = $("#id_comment").val();
    var username = '{{user.username}}';
    
    $('#comment-submit').before("<div class='row'><div class='span6 center' style=''><div class='well'><p>"+cmt+"</p><br/><p class='author pull-right'>by: <strong><i>{{user.username}}</i></strong></p></div></div></div>");
    $("#id_comment").val("");
  });
});
</script>
{% endblock %}
